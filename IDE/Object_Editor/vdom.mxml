<?xml version="1.0" encoding="utf-8"?>
<!--
	Development by Vadim A. Usoltsev, SE Group Ltd., Tomsk, Russia, 2007.
-->

<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="{start();}">
	<mx:XML id="langData" source="langs/translation.xml" />
	<mx:XML id="langsSource" source="langs/languages.xml" />
	<mx:Script source="main.as" />
	<mx:Fade id="myFade"/>
	<mx:Image id="defaultImage" source="@Embed(source='splash.png')" visible="false"/> <!-- Dafault icons Image -->
	<mx:Image id="waitingImage" source="@Embed(source='waiting.swf')" visible="false"/> <!-- Waiting Image -->

	<mx:states>
		<mx:State name="editorParams">
			<mx:AddChild relativeTo="{hbox1}" position="before">
				<mx:HBox width="100%">
					<mx:Spacer width="{ident_2}"/>
					<mx:Panel title="External Editor Parameters" paddingTop="0" paddingBottom="0" paddingLeft="0"
						paddingRight="0" width="100%" borderStyle="solid" cornerRadius="0" dropShadowEnabled="false">
						<mx:HBox width="100%">
						<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'title')}:"/>
						<mx:TextArea id="extEditorParam1" height="20" width="100%" cornerRadius="3"/>
						<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'info')}:"/>
						<mx:TextArea id="extEditorParam2" height="20" width="100%" cornerRadius="3"/>
						</mx:HBox>
					</mx:Panel>
				</mx:HBox>
			</mx:AddChild>
		</mx:State>
		<mx:State name="textFieldParams">
			<mx:AddChild relativeTo="{hbox1}" position="before">
				<mx:HBox width="100%">
					<mx:Spacer width="{ident_2}"/>
					<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'length')}:"/>
					<mx:TextArea id="textFieldParam1" height="20" width="200" cornerRadius="3"/>
				</mx:HBox>
			</mx:AddChild>
		</mx:State>
		<mx:State name="dropDownMenuParams">
			<mx:AddChild relativeTo="{hbox1}" position="before">
				<mx:HBox width="100%">
					<mx:Spacer width="{ident_2}"/>
					<mx:Panel title="DropDown Menu Parameters" paddingTop="0" paddingBottom="0" paddingLeft="0"
						paddingRight="0" width="100%" borderStyle="solid" cornerRadius="0" dropShadowEnabled="false">
					<mx:VBox width="100%">
						<mx:HBox width="100%" verticalAlign="bottom">
							<mx:ComboBox width="180"/>
							<mx:LinkButton label="Add element"/>
							<mx:LinkButton label="Remove element"/>
						</mx:HBox>
						<mx:HBox width="100%" verticalAlign="bottom">
							<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'displaytext')}:"/>
							<mx:TabNavigator id="ddownDispTextTabs" width="100%" tabHeight="16" borderStyle="none"
								paddingTop="1" creationComplete="{createLangsTabsAt(ddownDispTextTabs, ddownDispTextCollector, 20);}"/>
							<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'value')}:"/>
							<mx:TextArea height="20" width="100" cornerRadius="3"/>
						</mx:HBox>
					</mx:VBox>
				</mx:Panel>
				</mx:HBox>
			</mx:AddChild>
		</mx:State>
		<mx:State name="addLanguage">
			<mx:RemoveChild target="{hbox3}"/>
			<mx:AddChild relativeTo="{panel2}" position="lastChild">
				<mx:HBox width="100%" verticalAlign="middle">
					<mx:Spacer width="{ident_1}"/>
					<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'language')}:"/>
					<mx:ComboBox width="200" id="addLanguageComboBox" dataProvider="{langsSource.language}" labelField="@label" height="20"></mx:ComboBox>
					<mx:LinkButton label="{langData.language.(@id == langStr).sentence.(@label == 'add')}" click="{addSupLanguage();}"/>
					<mx:LinkButton label="{langData.language.(@id == langStr).sentence.(@label == 'cancel')}" click="{currentState = '';}"/>
				</mx:HBox>
			</mx:AddChild>
		</mx:State>
		<mx:State name="remLanguage">
			<mx:AddChild relativeTo="{panel2}" position="lastChild">
				<mx:HBox width="100%">
					<mx:Spacer width="{ident_1}"/>
					<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'language')}:"/>
					<mx:ComboBox width="200" id="remLanguageComboBox" dataProvider="{supLanguages.language}" labelField="@label" height="20"></mx:ComboBox>
					<mx:LinkButton label="{langData.language.(@id == langStr).sentence.(@label == 'remove')}" click="{removeSupLanguage();}"/>
					<mx:LinkButton label="{langData.language.(@id == langStr).sentence.(@label == 'cancel')}" click="{currentState = '';}"/>
				</mx:HBox>
			</mx:AddChild>
			<mx:RemoveChild target="{hbox3}"/>
		</mx:State>
	</mx:states>


	<mx:ViewStack id="vs" width="100%" height="100%">
	<mx:Canvas id="lngView" width="100%" height="100%">
		<mx:Panel title="Language select" paddingLeft="10" paddingRight="10" paddingBottom="10" paddingTop="10"
			width="400" height="300" layout="vertical" horizontalCenter="0" verticalCenter="0">
			<mx:TextArea width="100%" borderStyle="none" editable="false" height="100"
				text="To continue you must choose at least one language to use. It will be the first native supported object language. Not the interface language!"/>
			<mx:HBox horizontalAlign="center" width="100%">
				<mx:ComboBox id="nativeLanguageComboBox" dataProvider="{langsSource.language}" labelField="@label" height="20" width="200"/>
				<mx:Button height="20" label="OK" click="{checkForLanguageSelection();}"/>
			</mx:HBox>
		</mx:Panel>
	</mx:Canvas>
	
	<mx:Canvas id="mainView" width="100%" height="100%">
    <mx:Panel id="mainForm" title="V.D.O.M. Object IDE" paddingTop="0" paddingBottom="0" paddingLeft="0" paddingRight="0"
    	width="100%" height="100%" hideEffect="myFade" borderStyle="none"
    	backgroundColor="#c0c0c0" cornerRadius="0" minHeight="550" minWidth="700">
    	
        <mx:MenuBar labelField="@label" itemClick="menuHandler(event)" dataProvider="{menuBarCollection}" width="100%"/>
        
        <mx:TabNavigator width="100%" height="100%" paddingTop="10" paddingLeft="10" paddingRight="10" paddingBottom="10" id="tabnavigator1">
        
			<!-- Information tab -->
			<mx:Canvas id="infoTab" label="{langData.language.(@id == langStr).sentence.(@label == 'information')}" width="100%" height="100%">
			
				<!-- Basic Preference panels -->
				<mx:HBox direction="horizontal" width="100%" height="100%">
					<mx:Panel id="bpPanel" title="{langData.language.(@id == langStr).sentence.(@label == 'bscpref')}"
						width="50%" height="100%" dropShadowEnabled="false" alpha="1.0" borderStyle="solid" borderThickness="1"
						borderColor="#c0c0c0" creationComplete="{createInformationLangsTabs();}">
							
						<mx:HBox width="100%" verticalAlign="middle">
							<!-- Object Name -->
							<mx:Label id="onameLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'oname')}" width="{ident_1}"
								toolTip="{langData.language.(@id == langStr).sentence.(@id == 'a63')}"/>
							<mx:TextArea id="onameTextArea" width="100%" height="20" cornerRadius="3"/>
						</mx:HBox>
						
						<mx:HBox width="100%" verticalAlign="middle">
							<!-- ID -->
							<mx:Label id="idLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'id')}" width="{ident_1}"
								toolTip="{langData.language.(@id == langStr).sentence.(@id == 'a64')}"/>
							<mx:TextArea id="idTextArea" width="100%" height="20" editable="false" cornerRadius="3"/>
						</mx:HBox>
						
						<mx:HBox width="100%" verticalAlign="bottom">
							<!-- Display Name (Multilanguage) -->
							<mx:Label id="dnameLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'dname')}" width="{ident_1}"/>
							<mx:TabNavigator id="infoDnameTabs" width="100%" tabHeight="16" borderStyle="none" paddingTop="1"/>
						</mx:HBox>
						
						<mx:HRule width="100%" height="1"/>
						
						<mx:HBox width="100%" >
							<!-- Icon -->
							<mx:Label id="iconLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'icon')}" width="{ident_1}"/>
							<mx:Image id="iconImageBox" width="64" height="64" autoLoad="true" scaleContent="true" source=""
								creationComplete="{iconImage.source = defaultImage.source; iconImageBox.source = iconImage.source}"/>
							<mx:Button id="browseButton1" label="{langData.language.(@id == langStr).sentence.(@label == 'browse')}" height="20"
								click="{processIconData(event);}"/>
						</mx:HBox>
						
						<mx:HRule width="100%" height="1"/>
						
						<mx:HBox width="100%">
							<!-- Editor Icon -->
							<mx:Label id="eiconLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'eicon')}" width="{ident_1}"/>
							<mx:Image id="editorIconImageBox" width="64" height="64" scaleContent="true" autoLoad="true" source=""
								creationComplete="{editorIconImage.source = defaultImage.source; editorIconImageBox.source = editorIconImage.source}"/>
							<mx:Button id="browseButton2" label="{langData.language.(@id == langStr).sentence.(@label == 'browse')}" height="20"
								click="{processEditorIconData(event);}"/>
						</mx:HBox>
						
						<mx:HRule width="100%" height="1"/>
						
						<mx:HBox width="100%">
							<!-- Structure Icon -->
							<mx:Label id="siconLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'sicon')}" width="{ident_1}"/>
							<mx:Image id="structureIconImageBox" width="64" height="64" scaleContent="true" autoLoad="true" source=""
								creationComplete="{structureIconImage.source = defaultImage.source; structureIconImageBox.source = structureIconImage.source;}"/>
							<mx:Button id="browseButton3" label="{langData.language.(@id == langStr).sentence.(@label == 'browse')}" height="20"
								click="{processStructureIconData(event);}"/>
						</mx:HBox>

						<mx:HRule width="100%" height="1"/>
						
						<mx:HBox width="100%" verticalAlign="middle">
							<!-- Description (Multilanguage)-->
							<mx:Label id="descLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'descript')}" width="{ident_1}"/>
							<mx:TabNavigator id="infoDescriptTabs" width="100%" tabHeight="16" borderStyle="none" paddingTop="1"/>
						</mx:HBox>
						
					</mx:Panel>
         
					<mx:Panel width="50%" height="100%"  dropShadowEnabled="false" alpha="1.0" borderStyle="solid" borderThickness="1"
						borderColor="#c0c0c0" id="panel2">
					
						<mx:CheckBox id="mvChkBox" label="{langData.language.(@id == langStr).sentence.(@label == 'moveable')}"/>
						
						<mx:CheckBox id="dynamicChkBox" label="{langData.language.(@id == langStr).sentence.(@label == 'dynamic')}"/>

						<mx:CheckBox id="containerChkBox" label="{langData.language.(@id == langStr).sentence.(@label == 'container')}"/>
						
						<mx:HBox width="100%" verticalAlign="middle">
							<mx:Label id="categoryLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'category')}" width="{ident_1}"/>
							<mx:ComboBox id="ctgrsComboBox" width="200">
								<mx:dataProvider>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'standart')}" data="standart"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'advanced')}" data="advanced"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'usual')}" data="usual"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'portal')}" data="portal"/>
								</mx:dataProvider>
							</mx:ComboBox>
						</mx:HBox>
						
						<mx:HBox width="100%" verticalAlign="middle">
							<mx:Label id="itypeLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'itype')}" width="{ident_1}"/>
							<mx:ComboBox id="itypeComboBox" width="200">
								<mx:dataProvider>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'standart')}" data="1"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'rteditor')}" data="2"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'teditor')}" data="3"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'picture')}" data="4"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'spectable')}" data="5"/>
								</mx:dataProvider>
							</mx:ComboBox>
						</mx:HBox>
						
						<mx:HBox width="100%" verticalAlign="middle">
							<mx:Label id="verLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'version')}" width="{ident_1}"/>
							<mx:TextArea id="versionTextArea" width="100%" height="20" cornerRadius="3"/>
						</mx:HBox>
						
						<mx:HBox width="100%" verticalAlign="middle">
							<mx:Label id="opriorLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'optimprior')}" width="{ident_1}"/>
							<mx:TextArea id="opriorTextArea" width="100%" height="20" cornerRadius="3"/>
						</mx:HBox>
						
						<mx:HBox width="100%" verticalAlign="middle">
							<mx:Label id="cntnrsLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'containers')}" width="{ident_1}"/>
							<mx:TextArea id="containersTextArea" width="100%" height="20" cornerRadius="3"/>
						</mx:HBox>
						
						<mx:HBox width="100%" verticalAlign="middle">
							<mx:Label id="lngsLabel" text="{langData.language.(@id == langStr).sentence.(@label == 'languages')}" width="{ident_1}"/>
							<mx:TextArea id="supLangsTextArea" width="100%" height="20" cornerRadius="3" editable="false"
								creationComplete="{supLangsTextArea.text = supLanguages.language.@id;}"/>
						</mx:HBox>
						<mx:HBox width="100%" id="hbox3" verticalAlign="middle">
							<mx:Spacer width="{ident_1}"/>
							<mx:LinkButton label="{langData.language.(@id == langStr).sentence.(@label == 'add')}" height="20" click="{currentState = 'addLanguage';}" id="linkbutton2"/>
							<mx:LinkButton label="{langData.language.(@id == langStr).sentence.(@label == 'remove')}" height="20" id="linkbutton1" click="{currentState = 'remLanguage'}"/>
						</mx:HBox>
					</mx:Panel>
				</mx:HBox>
            </mx:Canvas>
            
			<mx:Canvas label="{langData.language.(@id == langStr).sentence.(@label == 'attributes')}" width="100%" height="100%"
				hide="{attrFieldsWrite();}" show="{attributesPanel.visible = false;}">
				<mx:HBox width="100%" height="100%">
				
					<mx:VBox width="200" height="100%">
						<mx:List id="attrList" width="100%" height="100%" labelField="@label" click="{if (currentAttr != -1) attrFieldsWriteNRefresh();}"
							dataProvider="{attributesCollection}" change="{attrFieldsWriteNRefresh();}"/>
							
						<mx:Button label="{langData.language.(@id == langStr).sentence.(@label == 'addnewattr')}" width="100%" click="{addNewAttribute();}"/>
						<mx:Button label="{langData.language.(@id == langStr).sentence.(@label == 'rmattr')}" width="100%" click="{removeAttributeAlert()}"/>
					</mx:VBox>
					
					
					<!-- /* ViewStack with Attribute Properties panels: Code interface Panel and Standart Properties Panel  */ -->
					
					<mx:ViewStack id="attributePropVS" width="100%" height="100%">
					<mx:Panel title="{langData.language.(@id == langStr).sentence.(@label == 'attrprop')}" width="100%" height="100%"
						dropShadowEnabled="false" alpha="1.0" borderStyle="solid" borderThickness="1" borderColor="#c0c0c0" id="attributesPanel"
						creationComplete="{createAttrLangsTabs(); attrFieldsRefresh(); attrList.selectedIndex = 0;}">
						
						<mx:HBox width="100%" id="hbox2">
							<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'name')}" width="{ident_2}"/>
							<mx:TextArea id="attrName" height="20" width="100%" cornerRadius="3" change="{attrFieldsWrite();}"/>
						</mx:HBox>
						
						<mx:HBox width="100%" verticalAlign="bottom">
							<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'dname')}" width="{ident_2}" alpha="1.0"/>
							<mx:TabNavigator id="attrDnameTabs" width="100%" tabHeight="16" borderStyle="none" paddingTop="1"/>
						</mx:HBox>
						
						<mx:HBox width="100%">
							<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'defval')}" width="{ident_2}"
								toolTip="Value witch is set to when the object is created"/>
							<mx:TextArea id="defValue" height="20" width="100%" cornerRadius="3"/>
						</mx:HBox>
						
						<mx:HBox width="100%">
							<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'regexpvld')}" width="{ident_2}"/>
							<mx:TextArea id="regExpVld" height="20" width="100%" cornerRadius="3"/>							
						</mx:HBox>
						
						<mx:HBox width="100%" verticalAlign="bottom">
							<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'errvldmess')}" width="{ident_2}"/>
							<mx:TabNavigator id="attrErrmsgTabs" width="100%" tabHeight="16" borderStyle="none" paddingTop="1"/>
						</mx:HBox>
						
	 					<mx:CheckBox id="visinedChBox" label="{langData.language.(@id == langStr).sentence.(@label == 'visined')}"/>
						
						<!-- Removed with new XML Specification	 					
	 					<mx:CheckBox id="extChBox" label="{langData.language.(@id == langStr).sentence.(@label == 'extended')}" toolTip="Is this attribute is a simple value or a long text"/>
	 					-->
	 					
						<mx:HBox width="100%">
							<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'itype')}:" width="{ident_2}"
								toolTip="Define if the interface is a built-in one (Std) or it use a VDOM XML Object to create it dynamically (Ext)"/>
								
							<mx:ComboBox id="attributeInterfaceType" close="{checkCodeInterface();}" width="180">
								<mx:dataProvider>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'standart')}" data="0"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'extended')}" data="1"/>
								</mx:dataProvider>
							</mx:ComboBox>
							
							<mx:ComboBox id="stdInterfaceType" change="{checkStdInterfaceTypeState();}" width="200">
								<mx:dataProvider>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'txtfld')}" data="TextField"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'ddownmenu')}" data="DropDown"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'file')}" data="File()"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'clrch')}" data="Color()"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'pglink')}" data="PageLink()"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'objlist')}" data="ObjectList()"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'lnkbase')}" data="LinkedBase()"/>
								<mx:Object label="{langData.language.(@id == langStr).sentence.(@label == 'exteditor')}" data="ExternalEditor"/>
								</mx:dataProvider>
							</mx:ComboBox>
							<mx:Button id="codeButton" label="{langData.language.(@id == langStr).sentence.(@label == 'ocinterface')}"
								creationComplete="{codeButton.enabled = false;}"
								click="{attributePropVS.selectedChild = attrCodeInterfacePanel; attrCodeInterfacePanel.visible = true;}"
								toolTip="{langData.language.(@id == langStr).sentence.(@id == 'a72')}"/>
								
						</mx:HBox>
						
						<mx:HBox id="hbox1" width="100%" verticalAlign="middle">
							<mx:Label text="{langData.language.(@id == langStr).sentence.(@label == 'descript')}" width="{ident_2}"/>
							<mx:TabNavigator id="attrDescriptTabs" width="100%" tabHeight="16" borderStyle="none" paddingTop="1"/>
						</mx:HBox>
						<mx:Button label="{langData.language.(@id == langStr).sentence.(@label == 'restore')}" click="{attrFieldsRefresh();}"/>
					</mx:Panel>
					<mx:Panel title="{langData.language.(@id == langStr).sentence.(@label == 'codeeditor')}" width="100%" height="100%"
						dropShadowEnabled="false" alpha="1.0" borderStyle="solid" borderThickness="1" borderColor="#c0c0c0"
						id="attrCodeInterfacePanel">
						
						<mx:VBox horizontalAlign="right" width="100%" height="100%">
							<mx:HBox width="100%" height="100%">
								<mx:TextArea id="attrCodeEditorNumbersArea" width="50" height="100%"
									borderStyle="none" verticalScrollPolicy="off" textAlign="right" editable="false"
									color="#666666"/>
								<mx:TextArea id="attrCodeEditorTextArea" width="100%" height="100%"
									focusOut="{checkTextAreaFocus();}" horizontalScrollPolicy="auto" wordWrap="false"
									keyDown="{keyValidator(event);}" keyUp="{justDrawNumbers();}"
									fontWeight="bold" click="{justDrawNumbers();}"
									creationComplete="{attrCodeEditorTextArea.text = attributesCollection[currentAttr].codeinterface;}"/>
							</mx:HBox>
							<mx:Button label="{langData.language.(@id == langStr).sentence.(@label == 'back')}"
								click="{attributePropVS.selectedChild = attributesPanel; attrCodeInterfacePanel.visible = false;}"/>
						</mx:VBox>						
					</mx:Panel>
					</mx:ViewStack>
					
					<!-- /* End of ViewStack Atribute Properties Panels */ -->
					
				</mx:HBox>
            </mx:Canvas>
			<mx:Canvas label="WCAG" width="100%" height="100%"/>
			<mx:Canvas label="SourceCode" width="100%" height="100%"/>
			<mx:Canvas label="Target XML" width="100%" height="100%" show="{buildObjectXML();}">
				<mx:TextArea id="targetXMLTextArea" width="100%" height="100%" verticalScrollPolicy="auto" horizontalScrollPolicy="auto"/>
			</mx:Canvas>
			<mx:Canvas label="Source XML" width="100%" height="100%">
				<mx:VBox height="100%" width="100%" horizontalAlign="right">
					<mx:TextArea id="sourceXMLTextArea" width="100%" height="100%" verticalScrollPolicy="auto" horizontalScrollPolicy="auto"/>
					<mx:Button x="965" y="611" label="Load" click="{loadObjectXML();}"/>
				</mx:VBox>
			</mx:Canvas>
        </mx:TabNavigator>
        <mx:Label id="hint" text="V.D.O.M. next generation v2.0"/>
    </mx:Panel>
	</mx:Canvas>
	</mx:ViewStack>
</mx:Application>
