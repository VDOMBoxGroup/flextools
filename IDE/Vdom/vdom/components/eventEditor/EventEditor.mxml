<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" creationComplete="creationCompleteHandler()" xmlns:eventEditor="vdom.components.eventEditor.*">
	 <mx:Script>
	 	<![CDATA[
	 		import vdom.managers.DataManager;
	 		import mx.collections.ArrayCollection;
	 		import mx.controls.DataGrid;
	 		import mx.controls.Text;
	 		import mx.core.DragSource;
	 		import mx.events.DragEvent;
	 		import mx.managers.DragManager;
	 		import vdom.components.treeEditor.TreeElement;
	 		
	 		[Bindable]
	 		private var dataManager:DataManager;
	 		
	 		private function creationCompleteHandler():void
	 		{
	 			
	 		}
	 	
	 		
	 		 private function dragEnterHandler(event:DragEvent):void 
	 		 {
	 		 
	 		   if( event.dragInitiator is TreeActions ) {
	 		   	trace('event.dragInitiator is TreeActions ')
	                    
	                    /*
	                    var ds:DragSource = event.dragSource;
	                    if( !ds.hasFormat("treeItems") ) return;     // no useful data
	
	                    var items:Array = ds.dataForFormat("treeItems") as Array;
	                    for(var i:Number=0; i < items.length; i++) {
	
	                        var item:XML = XML(items[i]);
	                        if( item.@label != "Personal" ) return; // not what we want
	
	                    }
	                    */
	                } 
				
	                var dropTarget:Canvas=Canvas(event.currentTarget);
	                DragManager.acceptDragDrop(dropTarget);
	        }
                
	        private function dragDropHandler(event:DragEvent):void 
	        {
	        	var evEdEvent:EventEditorEvent = new EventEditorEvent('123');
	        	
	        	evEdEvent.x = event.localX;
	        	evEdEvent.y = event.localY;
	        	
	 			can.addChild(evEdEvent); 
	        }   
	        
	        private function onTreeDragComplete(event:DragEvent):void 
	        {
                event.preventDefault();
            }    
	 	]]>
	 </mx:Script>
	 
	 
	 <mx:XMLList id="treeData">
	    <node label="Mail Box">
	        <node label="Inbox">
	            <node label="Marketing"/>
	            <node label="Product Management"/>
	            <node label="Personal"/>
	        </node>
	        <node label="Outbox">
	            <node label="Professional"/>
	            <node label="Personal"/>
	        </node>
	        <node label="Spam"/>
	        <node label="Sent"/>
		</node>	
    </mx:XMLList>
	
	<mx:HDividedBox width="100%" height="100%">
		 <mx:Canvas label="Canvas 1" width="200" height="100%" >
                <mx:TabNavigator id="tn"  width="100%" height="100%">
		            <!-- Define each panel using a VBox container. -->
					
					<mx:Canvas label="Container"  width="100%" height="100%"  >
			             <eventEditor:TreeContainer id="trContainer" width="100%" height="100%" 
                			 dataProvider="{treeData}" />
			        </mx:Canvas>
			        
			        <mx:Canvas label="Events"  width="100%" height="100%" >
			             <eventEditor:TreeEvents id="trEvents" width="100%" height="100%" 
                			dataProvider="{treeData}" />
			        </mx:Canvas>
			        
			        <mx:Canvas label="Actions"  width="100%" height="100%" >
			             <eventEditor:TreeActions id="trActions" width="100%" height="100%" 
                			 dataProvider="{treeData}" />
			        </mx:Canvas>
			        

		        </mx:TabNavigator>
            </mx:Canvas>

            <mx:VBox  width="100%" height="100%" >
                <mx:Label text="Current container: selected container" fontWeight="bold"  color="0xFFFFFF"/>
                <mx:Canvas id="can" width="100%" height="100%" 
                		backgroundColor="#09FC09"
                	 	dragEnter="dragEnterHandler(event);" 
        				dragDrop="dragDropHandler(event);"/>
            </mx:VBox>
	</mx:HDividedBox>
		

</mx:Canvas>
