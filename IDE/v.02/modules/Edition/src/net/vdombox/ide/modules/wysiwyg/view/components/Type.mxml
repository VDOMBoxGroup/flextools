<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/halo">
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			import mx.controls.Image;
			import mx.core.DragSource;
			
			[Bindable]
			private var _source:Object;
			
			[Bindable]
			private var _typeLabelText:String
			
			private var typeId:String;
			private var aviableContainers:String;

			public function set typeDescription( value : Object ) : void
			{
				typeId = value.typeId;
				aviableContainers = value.aviableContainers;
			}

			public function set resource( imageResource : ByteArray ) : void
			{
				if ( !imageResource )
				{
//					_source = Application.application.getStyle( "defaultTypeIcon" );
				}
				else
				{
					_source = imageResource;
				}
			}

			public function set typeLabel( value : String ) : void
			{
				_typeLabelText = value;
			}

			private function dragIt( event : MouseEvent ) : void
			{

				var dragInitiator : Type = Type( event.currentTarget );
				var ds : DragSource = new DragSource();

				var dataObject : Object = { typeId: typeId, aviableContainers: aviableContainers, offX: dragInitiator.mouseX, offY: dragInitiator.mouseY };

				ds.addData( dataObject, 'typeDescription' );

				var proxy : Image = new Image();

				proxy.width = 58;
				proxy.height = 58;
				proxy.source = typeIcon.source;

//				VdomDragManager.doDrag( dragInitiator, ds, event, proxy, proxy.width / 2 - dragInitiator.mouseX, proxy.height / 2 - dragInitiator.mouseY );

			}
		]]>
	</fx:Script>
	
	<s:layout>
		<s:VerticalLayout />
	</s:layout>
	
	<mx:Image id="typeIcon" source="{_source}"
			  width="58" height="58"/>
	<mx:Label id="_typeLabel" text="{_typeLabelText}"
			  width="90" truncateToFit="true"/>
</s:Group>
