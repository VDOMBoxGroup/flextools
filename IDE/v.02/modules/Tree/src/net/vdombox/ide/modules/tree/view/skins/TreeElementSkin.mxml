<?xml version="1.0" encoding="utf-8"?>
<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009"
			 xmlns:s="library://ns.adobe.com/flex/spark"
			 xmlns:mx="library://ns.adobe.com/flex/halo">

	<fx:Metadata>
		[HostComponent("net.vdombox.ide.modules.tree.view.components.TreeElement")]
	</fx:Metadata>

	<fx:Script>
		<![CDATA[
			private var _selected : Boolean;

			private var _minimized : Boolean;

			public function get selected() : Boolean
			{
				return _selected;
			}

			public function set selected( value : Boolean ) : void
			{
				if ( _selected == value )
					return;

				_selected = value;

				if ( _selected )
				{
					if ( _minimized )
						currentState = "minimizedSelected";
					else
						currentState = "normalSelected";
				}
				else
				{
					if ( _minimized )
						currentState = "minimized";
					else
						currentState = "normal";
				}
			}

			private function switchState() : void
			{
				if ( _minimized )
				{
					if ( _selected )
						currentState = "normalSelected";
					else
						currentState = "normal";

					hostComponent.height = 125;
				}
				else
				{
					if ( _selected )
						currentState = "minimizedSelected";
					else
						currentState = "minimized";

					hostComponent.height = 30;
				}
			}

			override protected function updateDisplayList( unscaledWidth : Number, unscaledHeight : Number ) : void
			{
				super.updateDisplayList( unscaledWidth, unscaledHeight );
			}
		]]>
	</fx:Script>

	<s:states>

		<s:State name="normal" stateGroups="normalGroup, unselectedGroup" />

		<s:State name="normalSelected" stateGroups="normalGroup, selectedGroup" />

		<s:State name="minimized" stateGroups="minimizedGroup, unselectedGroup" />

		<s:State name="minimizedSelected" stateGroups="minimizedGroup, selectedGroup" />
	</s:states>

	<s:Group id="topMask"
			 bottom="1" left="1" right="1" top="1">

		<s:Rect height="100%" width="100%"
				radiusX="7" radiusY="7">

			<s:fill>

				<s:SolidColor color="0x66FF66" />
			</s:fill>
		</s:Rect>
	</s:Group>

	<s:Group height="12" x="7" y="-12">

		<s:Rect height="100%" width="70">

			<s:fill>

				<s:BitmapFill source="@Embed(source='assets/treeEditor/treeEditor.swf', symbol='menu')" />
			</s:fill>
		</s:Rect>

		<s:Group x="5" verticalCenter="0">

			<s:layout>

				<s:HorizontalLayout />
			</s:layout>

			<mx:Image id="minimizeButton"
					  buttonMode="true" height="10"
					  source.minimizedGroup="@Embed(source='assets/treeEditor/treeEditor.swf', symbol='plus')"
					  source.normalGroup="@Embed(source='assets/treeEditor/treeEditor.swf', symbol='minus')"
					  width="10" />

			<mx:Image id="createLineButton"
					  height="10"
					  source="@Embed(source='assets/treeEditor/treeEditor.swf', symbol='line')"
					  width="10" />

			<mx:Image id="deleteButton"
					  height="10"
					  source="@Embed(source='assets/treeEditor/treeEditor.swf', symbol='delete')"
					  width="10" />

			<mx:Image id="setStartPageButton"
					  height="10"
					  source="@Embed(source='assets/treeEditor/treeEditor.swf', symbol='start_page')"
					  width="10" />
		</s:Group>
	</s:Group>

	<s:Group height="100%" width="100%"
			 mask="{ topMask }">

		<s:Rect bottom="0" left="0" right="0" top="0">

			<s:fill>

				<s:SolidColor color="white" />
			</s:fill>
		</s:Rect>

		<s:Group id="header"
				 height="30" width="100%">

			<s:Rect height="100%" width="100%">

				<s:fill>

					<mx:LinearGradient rotation="90">

						<mx:entries>

							<mx:GradientEntry color="0xcccccc" ratio="0.0" />

							<mx:GradientEntry color="0x151515" ratio="0.7" />

							<mx:GradientEntry color="0x151515" ratio="1" />
						</mx:entries>
					</mx:LinearGradient>
				</s:fill>
			</s:Rect>

			<s:HGroup width="100%" top="4">
				<!--<mx:Image height="25" source="{ _typeResource.data }" width="25" />-->

				<s:Label id="pageTitle" />
			</s:HGroup>
		</s:Group>

		<s:HGroup height="100%" width="100%"
				  top="30"
				  visible.minimized="false">
			<!--<mx:Image height="80" source="{ _pageResource.data }" width="80" />-->

			<s:VGroup height="100%" width="100%">

				<s:RichText id="descriptionTextArea"
							height="47" width="100%" />

				<s:Label id="typeNameLabel" width="100%" />
			</s:VGroup>
		</s:HGroup>
	</s:Group>

	<s:Rect height="100%" width="100%"
			radiusX="7" radiusY="7">

		<s:stroke>

			<s:SolidColorStroke color.selectedGroup="white" color.unselectedGroup="gray"
								weight="2" />
		</s:stroke>
	</s:Rect>
</s:SparkSkin>
