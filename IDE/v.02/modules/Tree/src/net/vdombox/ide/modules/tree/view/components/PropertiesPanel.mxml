<?xml version="1.0" encoding="utf-8"?>
<s:Panel xmlns:fx="http://ns.adobe.com/mxml/2009"
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:mx="library://ns.adobe.com/flex/halo"
		 
		 title="{ resourceManager.getString( 'Tree_General', 'properties_panel_title' ) }">

	<fx:Script>
		<![CDATA[
			import mx.binding.utils.BindingUtils;
			import mx.binding.utils.ChangeWatcher;

			import net.vdombox.ide.common.vo.AttributeVO;
			import net.vdombox.ide.common.vo.PageAttributesVO;
			import net.vdombox.ide.modules.tree.events.PropertiesPanelEvent;

			private var _pageAttributesVO : PageAttributesVO;

			[Bindable]
			private var titleAttributeVO : AttributeVO;

			[Bindable]
			private var descriptionAttributeVO : AttributeVO;

			[Bindable]
			private var imageAttributeVO : AttributeVO;

			public function set pageAttributesVO( value : PageAttributesVO ) : void
			{
				_pageAttributesVO = value;

				pageAttributesChanged();
			}

			private function pageAttributesChanged() : void
			{
				if ( _pageAttributesVO )
				{
					titleAttributeVO = getAttributeByName( "title" );
					descriptionAttributeVO = getAttributeByName( "description" );
					imageAttributeVO = getAttributeByName( "image" );

					if ( _pageAttributesVO.pageVO.applicationVO.indexPageID == _pageAttributesVO.pageVO.id )
						makeStartButton.enabled = false;
					else
						makeStartButton.enabled = true;

					saveButton.enabled = true;
					deleteButton.enabled = true;

				}
				else
				{
					saveButton.enabled = false;
					makeStartButton.enabled = false;
					deleteButton.enabled = false;
				}

			}

			private function getAttributeByName( name : String ) : AttributeVO
			{
				var result : AttributeVO;

				for each ( var attributeVO : AttributeVO in _pageAttributesVO.attributes )
				{
					if ( attributeVO.name == name )
					{
						result = attributeVO;

						break;
					}
				}

				return result;
			}
		]]>
	</fx:Script>

	<s:layout>

		<s:VerticalLayout />
	</s:layout>

	<s:Label id="typeNameLabel"
			 height="15" text="TypeName" width="100%"
			 backgroundColor="#8D8D8D" color="#FFFFFF" horizontalCenter="0" textAlign="center"
			 verticalAlign="middle" />

	<mx:Grid width="100%"
			 horizontalGap="0" verticalGap="0">

		<mx:GridRow width="100%">

			<mx:GridItem backgroundColor="gray" verticalAlign="middle">

				<s:Label 
						 text="{ resourceManager.getString( 'Tree_General', 'properties_panel_page_title' ) }"
						 verticalAlign="middle" />
			</mx:GridItem>

			<mx:GridItem width="100%">

				<s:TextInput id="pageTitleInput"
							 text="@{ titleAttributeVO.value }" width="100%" />
			</mx:GridItem>
		</mx:GridRow>

		<mx:GridRow width="100%">

			<mx:GridItem backgroundColor="gray" verticalAlign="middle">

				<s:Label 
						 text="{ resourceManager.getString( 'Tree_General', 'properties_panel_page_description' ) }"
						 verticalAlign="middle" />
			</mx:GridItem>

			<mx:GridItem width="100%">

				<s:TextInput id="pageDescriptionInput"
							 text="@{ descriptionAttributeVO.value }" width="100%" />
			</mx:GridItem>
		</mx:GridRow>

		<mx:GridRow width="100%">

			<mx:GridItem backgroundColor="gray" verticalAlign="middle">

				<s:Label 
						 text="{ resourceManager.getString( 'Tree_General', 'properties_panel_page_image' ) }"
						 verticalAlign="middle" />
			</mx:GridItem>

			<mx:GridItem width="100%">

				<s:TextInput id="pageImageInput"
							 text="@{ imageAttributeVO.value }" width="100%" />
			</mx:GridItem>
		</mx:GridRow>
	</mx:Grid>

	<s:controlBarContent>

		<s:Button id="saveButton"
				  enabled="false"
				  label="{ resourceManager.getString( 'Tree_General', 'properties_panel_btn_save' ) }"
				  click="dispatchEvent( new PropertiesPanelEvent ( PropertiesPanelEvent.SAVE_PAGE_ATTRIBUTES ) )" />

		<s:Button id="makeStartButton"
				  enabled="false"
				  label="{ resourceManager.getString( 'Tree_General', 'properties_panel_btn_start' ) }"
				  click="dispatchEvent( new PropertiesPanelEvent ( PropertiesPanelEvent.MAKE_START_PAGE ) )" />

		<s:Button id="deleteButton"
				  enabled="false"
				  label="{ resourceManager.getString( 'Tree_General', 'properties_panel_btn_delete' ) }"
				  click="dispatchEvent( new PropertiesPanelEvent ( PropertiesPanelEvent.DELETE_PAGE ) )" />
	</s:controlBarContent>
</s:Panel>
