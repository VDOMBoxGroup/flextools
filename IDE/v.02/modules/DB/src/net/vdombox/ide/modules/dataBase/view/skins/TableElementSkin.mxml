<?xml version="1.0" encoding="utf-8"?>
<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" 
		xmlns:mx="library://ns.adobe.com/flex/mx"
		creationComplete="sparkskin1_creationCompleteHandler(event)"
		removedFromStage="sparkskin1_removedFromStageHandler(event)"
		doubleClick="sparkskin1_doubleClickHandler(event)" doubleClickEnabled="true" xmlns:components="net.vdombox.components.*" xmlns:components1="net.vdombox.ide.common.view.components.*">
	<!-- host component -->
	<fx:Metadata>
		[HostComponent("net.vdombox.ide.modules.dataBase.view.components.TableElement")]
	</fx:Metadata>
	
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			
			import net.vdombox.ide.modules.dataBase.events.TableElementEvent;
			
			import spark.components.Button;
			import spark.components.RichEditableText;
			
			protected function sparkskin1_creationCompleteHandler(event:FlexEvent):void
			{
				hostComponent.sendCreationCompleteTable();
				addEventListener( MouseEvent.MOUSE_DOWN, mouseDownHandler, true );
				addEventListener( MouseEvent.MOUSE_DOWN, mouseDownHandler );
			}
			
			private function mouseDownHandler( event : MouseEvent ) : void
			{
				if ( event.target is Image )
					return;
					
				if ( event.target is Button )
					return;
				
				hostComponent.mouseDownHandler();
			}
			
			protected function sparkskin1_removedFromStageHandler(event:Event):void
			{
				removeEventListener( MouseEvent.MOUSE_DOWN, mouseDownHandler, true );
				removeEventListener( MouseEvent.MOUSE_DOWN, mouseDownHandler );
			}
			
			protected function angle_mouseDownHandler(event:MouseEvent):void
			{
				hostComponent.mouseDownAngleHandler();
			}
			
			protected function textinput1_doubleClickHandler(event:MouseEvent):void
			{
				hostComponent.openRenameWindow();
			}
			
			protected function sparkskin1_doubleClickHandler(event:MouseEvent):void
			{
				if ( event.target is Label )
					return;
				
				hostComponent.sendGoToTable();
			}
			
		]]>
	</fx:Script>
	
	<!-- states -->
	<s:states>
		<s:State name="disabled" />
		<s:State name="normal" />
	</s:states>
	
	<s:RectangularDropShadow id="dropShadow"
							 bottom="0" color="#B3B3B3" left="0" right="0"
							 top="0"
							 alpha="1" angle="45" blRadius="4" blurX="12"
							 blurY="12" brRadius="4" distance="0" tlRadius="4"
							 trRadius="4"/>
	
	<s:Rect bottom="0" left="0" right="0" top="0">
		<s:fill>
			<s:SolidColor color="#FFFFFF" />
		</s:fill>
	</s:Rect>
	
	<s:VGroup width="100%" height="100%" paddingTop="10">
		
		<s:Label id="nameTable" text="{ hostComponent.objectVO.name }" verticalCenter="0" paddingLeft="10" paddingRight="10" width="100%"
				maxDisplayedLines="1" fontWeight="bold" fontSize="12"
				doubleClick="textinput1_doubleClickHandler(event)" doubleClickEnabled="true"/>
		
		<s:Group width="100%" height="100%">
			<s:Rect  bottom="0" left="0" right="0" top="0">
				<s:fill>
					<s:BitmapFill source = "@Embed('assets/backgroundtable.png')" smooth="true" fillMode="repeat"/>
				</s:fill>
			</s:Rect>
			
			<components1:VDOMScroller width="100%" height="100%">
				
				<s:VGroup id="attributes" width="100%" height="100%" gap="0"/>
				
			</components1:VDOMScroller>
			
			<s:Rect  top="0" left="0" right="0" height="6">
				<s:fill>
					<s:BitmapFill source = "@Embed('assets/shadowtable.png')" smooth="true" fillMode="repeat"/>
				</s:fill>
			</s:Rect>
		</s:Group>
		
		
	</s:VGroup>
	
	<mx:Image id="angle" bottom="0" right="0" width="8" height="8"
			  source="@Embed('assets/cornertable.png')" mouseDown="angle_mouseDownHandler(event)" />
	
</s:SparkSkin>
