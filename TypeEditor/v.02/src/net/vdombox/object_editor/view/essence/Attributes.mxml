<?xml version="1.0" encoding="utf-8"?>
<s:NavigatorContent	 xmlns:fx="http://ns.adobe.com/mxml/2009" 
					 xmlns:s="library://ns.adobe.com/flex/spark" 
					 xmlns:mx="library://ns.adobe.com/flex/mx"  
					 xmlns:ns="net.vdombox.object_editor.model.*"
					 xmlns:ns2="net.vdombox.object_editor.view.*"
					 label="Attributes">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			
			import net.vdombox.object_editor.view.AttributesListRenderer;
			
			[Bindable]
			public var currentAttribute:Object;
						
			public function clearAttributeFields():void
			{
				fname.text				= "";
				displayName.text		= "";
				errMessage.text			= "";//надо удалять содержимое?
				visibleAtr.selected		= false;
				help.clearTextArea();
				
				attributesList.dataProvider = null;
			}
			
			[Bindable]
			public var arInterfaceType:ArrayCollection = new ArrayCollection(
				[ 	{label:"Standard", 		data:0}, 
					{label:"RichText Editor", data:1}, 
					{label:"Text Editor", 	data:2}, 
					{label:"Picture", 		data:3}, 
					{label:"Special Table", data:4}]);	
			
			[Bindable]
			public var arColorGroup:ArrayCollection = new ArrayCollection(
				[ 	{label:"SELECT VALUE", 	data:0},
					{label:"Grey", 		 	data:1}, 
					{label:"Red", 			data:2}, 
					{label:"Green",			data:3}, 
					{label:"Blue", 			data:4}, 
				]);	

			[Bindable]
			public var arCodeInterface:ArrayCollection = new ArrayCollection(
				[ 	{label:"TextField", 		data:"TextField(Length)"},
					{label:"Number1", 			data:"Number(minValue, maxValue)"}, 
					{label:"MultiLine", 		data:"MultiLine(Length)"}, 
					{label:"Font", 				data:"!Font()"}, 
					{label:"DropDown", 			data:"DropDown(Values)"}, 
					{label:"File", 				data:"File()"}, 
					{label:"Color", 			data:"Color()"}, 
					{label:"PageLink", 			data:"PageLink()"}, 
					{label:"LinkedBase",		data:"LinkedBase()"}, 
					{label:"ObjectList", 		data:"ObjectList(type_id)"}, 
					{label:"ExternalEditor",	data:"ExternalEditor(Title, Info)"}
				]);	
								
			private function changeField():void
			{
				dispatchEvent(new Event( Event.CHANGE ));
			}
			
			private function changeStack():void
			{				
				var label:String = codeInterface.selectedItem.label;
//				var data: String = new String();
				if( label != "Font" &&
					label != "File" &&
					label != "Color" &&
					label != "PageLink" &&
					label != "LinkedBase" )
				{
					var ch:* = myViewStack.getChildByName(codeInterface.selectedItem.label);
					myViewStack.selectedChild = ch;
					setData(label);
				}	
				else
				{
					myViewStack.selectedChild = notArguments;
				}
				dispatchEvent(new Event( Event.SELECT));
			}
			
			private function setData( label:String ):void
			{
//				var obj:Object = new Object();
				switch ( label ) 
				{					
					case "Number1":
//						obj = arCodeInterface[1];
						arCodeInterface[1].data = label + "(" + minValue + "," + maxValue + ")";
						break;
					case "MultiLine":
//						obj = arCodeInterface[2];
						arCodeInterface[2].data = label + "(" + multiLineLength + ")";
						break;
					case "Font":
//						obj = arCodeInterface[3];
						arCodeInterface[3].data = "!" + label + "()";
						break;
				}
			}
						
		]]>
	</fx:Script>
	<s:Scroller width="{this.width}" height="{this.height}">
	<s:HGroup>
		<s:VGroup height="{300}">
			<s:List itemRenderer="net.vdombox.object_editor.view.AttributesListRenderer"  id="attributesList" height="{height- 50}" width="100%" dragMoveEnabled="true" dragEnabled="true" dropEnabled="true" change="this.currentAttribute=List(event.target).selectedItem"/>
			<s:HGroup>
				<s:Button id="addAttributeButton" label="Add"/>
				<s:Button id="deleteAttributeButton" label="Delete" enabled="{attributesList.selectedIndex != -1}"/>
			</s:HGroup>
		</s:VGroup>
		<mx:Form width="100%" color="0x323232" paddingTop="0">
			<mx:FormHeading fontSize="10"  label="Enter values into the form." paddingTop="0" />
			
			<mx:FormItem label="Name" toolTip="Имя объекта">
				<mx:TextInput id="fname" width="250" change="{changeField()}"/>
			</mx:FormItem>
			
			<mx:FormItem label="DisplayName" >
				<ns2:LangTextArea id="displayName" width="250" height="20" change="{changeField()}" />
			</mx:FormItem >
			
			<mx:FormItem label="DefaultValue" toolTip="Значение по умолчанию">
				<mx:TextInput id="defaultValue" width="250" change="{changeField()}"/>
			</mx:FormItem>
						
			<mx:FormItem label="RegExp" >
				<s:HGroup>
					<s:TextInput id="regExp" width="250"  change="{changeField()}"/>
					<!--s:Button label="..." width="30" click="{}" /-->
				</s:HGroup>
			</mx:FormItem>
			
			<mx:FormItem label="Error Validation Message">
				<!--s:TextArea id="fErrMessage" width="200" change="{viewChanged()}" height="40" verticalScrollPolicy="auto"/-->
				<ns2:LangTextArea id="errMessage" width="200" height="40" change="{changeField()}"/>
			</mx:FormItem>
			
			<mx:FormItem label="Visible" >
				<s:CheckBox id="visibleAtr" label="Visible atribute"  toolTip="Отображаемый в редакторе" change="{changeField()}"/>
			</mx:FormItem>
			
			<mx:FormItem  label="Help">
				<ns2:LangTextArea id="help" width="250" height="40" change="{changeField()}"/>
			</mx:FormItem >

			<mx:FormItem label="InterfaceType" 
						 toolTip="Значения: 1 - Standard, 2 - RichText Editor, 3 - Text Editor, 4 - Picture, 5 - Special Table">
				<s:ComboBox id="interfaceType" dataProvider="{arInterfaceType}" width="250" change="{changeField()}"/>
			</mx:FormItem>
			
			<mx:FormItem label="Colorgroup" 
						 toolTip="Цветовая группа атрибута, значения: 1 - Grey, 2 - Red, 3 - Green, 4 - Blue">
				<s:ComboBox id="colorgroup" dataProvider="{arColorGroup}" width="250" change="{changeField()}"/>
			</mx:FormItem>
			
			<mx:FormItem label="CodeInterface" >
				<s:HGroup>
					<s:ComboBox change="{changeStack()}" id="codeInterface" dataProvider="{arCodeInterface}" width="250" />
				</s:HGroup>
				<mx:ViewStack id="myViewStack" borderStyle="solid" width="250" height="120" color="0x323232">
					
					<s:NavigatorContent id="TextField" fontWeight="bold" >						
						<s:layout>
							<s:VerticalLayout horizontalAlign="center"  
											  paddingTop="5" paddingLeft="5" 
											  paddingRight="5" paddingBottom="5" />
						</s:layout>
						
						<s:HGroup>
							<s:Label 	 text="Length:"/>
							<s:TextInput id="fieldLength" width="180" change="changeStack()"/>							
						</s:HGroup>
					</s:NavigatorContent>
					
					<s:NavigatorContent id="Number1" fontWeight="bold" >						
						<s:layout>
							<s:VerticalLayout horizontalAlign="center"  
											  paddingTop="5" paddingLeft="5" 
											  paddingRight="5" paddingBottom="5" />
						</s:layout>
						
						<s:VGroup>
							<s:Label 	 text="min Value"/>
							<s:TextInput id="minValue" width="200" change="changeStack()"/>
							<s:Label 	 text="max Value"/>
							<s:TextInput id="maxValue" width="200" change="changeStack()"/>
						</s:VGroup>
					</s:NavigatorContent>
					
					<s:NavigatorContent id="MultiLine" fontWeight="bold" >
						<s:layout>
							<s:VerticalLayout horizontalAlign="center"  
											  paddingTop="5" paddingLeft="5" 
											  paddingRight="5" paddingBottom="5" />
						</s:layout>
						<s:HGroup>
							<s:Label 	 text="Length:"/>
							<s:TextInput id="multiLineLength" width="180" change="changeStack()"/>
						</s:HGroup>
					</s:NavigatorContent>
					
					<s:NavigatorContent id="DropDown" fontWeight="bold" >
						<s:layout>
							<s:VerticalLayout horizontalAlign="center"  
											  paddingTop="5" paddingLeft="5" 
											  paddingRight="5" paddingBottom="5" />
						</s:layout>
						<s:HGroup>
							<s:Label 	 text="Values:"/>
							<s:TextInput id="ddValues" width="180" change="changeStack()"/>
						</s:HGroup>
					</s:NavigatorContent>
					
					<s:NavigatorContent id="ObjectList" fontWeight="bold" >
						<s:layout>
							<s:VerticalLayout horizontalAlign="center"  
											  paddingTop="5" paddingLeft="5" 
											  paddingRight="5" paddingBottom="5" />
						</s:layout>
						<s:HGroup>
							<s:Label	 text="type id:"/>
							<s:TextInput id="typeId" width="180" change="changeStack()"/>
						</s:HGroup>
					</s:NavigatorContent>
					
					<s:NavigatorContent id="ExternalEditor" fontWeight="bold" >
						<s:layout>
							<s:VerticalLayout horizontalAlign="center"  
											  paddingTop="5" paddingLeft="5" 
											  paddingRight="5" paddingBottom="5" />
						</s:layout>
						<s:VGroup>
							<s:Label 		text="Title:"/>
							<s:TextInput	id="title" width="200" change="changeStack()"/>
							<s:Label  		text="Info:"/>
							<s:TextInput 	id="info"  width="200" change="changeStack()"/>
						</s:VGroup>
					</s:NavigatorContent>
					
					<s:NavigatorContent id="notArguments"/>								
				</mx:ViewStack>
			</mx:FormItem>
			
		</mx:Form>		
	</s:HGroup>
	</s:Scroller >
</s:NavigatorContent>
