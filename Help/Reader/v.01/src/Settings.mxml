<?xml version="1.0" encoding="utf-8"?>
<!--
	Resource Browser component for VDOM Box IDE
	Developed by Vadim A. Usoltsev, Tomsk, Russia, 2008
-->
<mx:TitleWindow 
	xmlns:mx="http://www.adobe.com/2006/mxml" 
	layout="absolute" width="600" height="450"
	title="Settings"
	creationComplete="creationComplete()"
	showCloseButton="true"
	verticalScrollPolicy="off" horizontalScrollPolicy="off" 
	borderAlpha="0.98" cornerRadius="1" 
	visible="true" shadowDirection="right"
	borderColor="#373739" titleStyleName="resourceBrowserTitle"
	borderThicknessLeft="1" borderThicknessRight="1"
>
	<mx:Style>
		.resourceBrowserTitle {
			color:#FFFFFF;
			fontWeight:bold;
		}
	</mx:Style>
	<mx:Script>
		<![CDATA[
			import mx.controls.CheckBox;
			import mx.managers.PopUpManager;
			import mx.events.CloseEvent;
			
			private var sqlProxy:SQLProxy = new SQLProxy();
			private var checkBoxArray:Array = []; 
			
			private function creationComplete():void 
			{
				addEventListener(CloseEvent.CLOSE, closeHandler); 
				PopUpManager.centerPopUp(this);
				
				var result:Object = sqlProxy.getAllProducts();
				for(var i:String in result)
				{
					var chBox:CheckBox = new CheckBox();
					chBox.label = result[i]["title"];
					chBox.selected = result[i]["visible"] == "true" ;
					applications.addChild(chBox);
					checkBoxArray[result[i]["name"]] = chBox;
				}
				
			}
			
			private function closeHandler(cEvent:CloseEvent):void 
			{
				PopUpManager.removePopUp(this);
			}
			
			private function cancelPressed():void 
			{
				dispatchEvent(new CloseEvent(CloseEvent.CLOSE));
			}
			
			private function okHandler():void 
			{
				for(var name:String in checkBoxArray)
				{
					sqlProxy.changeStatusForProduct(name, checkBoxArray[name]["selected"]);
				}
				
				dispatchEvent(new CloseEvent(CloseEvent.CLOSE));
			}
		]]>
		
	
		
	</mx:Script>
	<mx:TabNavigator width="100%" height="100%">
		<mx:VBox label="Products" width="100%" height="100%" paddingBottom="10" paddingLeft="10" paddingRight="10">
			<mx:Label text="Select Necessary Products: " width="100%" textAlign="center" fontSize="20"/>
			<mx:VBox id="applications" paddingLeft="5"   borderStyle="solid" width="100%" height="100%" />
		</mx:VBox>
		<mx:VBox label="Update" width="100%" height="100%">
			<mx:Label text="Udate Settings" />
			<mx:ComboBox />
		</mx:VBox>
	</mx:TabNavigator>
	<mx:ControlBar horizontalAlign="right" 
			height="35" paddingTop="2" paddingBottom="2" paddingLeft="10" paddingRight="10" color="#FFFFFF" >
    		<mx:Button id="OK" label="Ok"   width="60" click="okHandler()"/>
    		<mx:Button label="Cancel"  click=" {cancelPressed()}"/>
	</mx:ControlBar>
</mx:TitleWindow>
