<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml">
	<mx:Script>
		<![CDATA[
			import flash.display.DisplayObjectContainer;
			
			import flexunit.utils.ArrayList;
			
			import mx.controls.List;
			import mx.events.FlexEvent;
			import mx.managers.PopUpManager;
			
			public static const TITLE_FUNCTIONS				: String = "Functions:"
			public static const TITLE_WHOLE_FUNCTIONS		: String = "wholeMethod functions:"
			public static const TITLE_VARIABLES				: String = "Variables:"
			public static const TITLE_GRAPHS				: String = "Graphs:"
			
			private var _listData : Array;
			
			public function set listData( value : Array ) : void
			{
				if (!value || value.length == 0)
				{
					_listData = null;
					return;
				}
				
				if ( value[0].hasOwnProperty( "label" ) )
					value.sortOn("label", Array.CASEINSENSITIVE);
				else
					value.sort();
				
				_listData = value;
			}
			
			[Bindable]
			public function get listData () : Array
			{
				return _listData;
			}
			
			public function getSelectedValue() : String
			{
				if (!list || !list.selectedItem)
					return "";
				
				return list.selectedItem.hasOwnProperty( "data" ) ? list.selectedItem["data"] : list.selectedItem.toString();
			}
			
			public function show( owner : DisplayObjectContainer, x : int, y : int ) : void
			{
				this.x = x;
				this.y = y;
				
				PopUpManager.addPopUp( this, owner.parent );
			}
			
			private var _maxItemLength : int;
			
			public function set maxItemLength (value : int) : void
			{
				_maxItemLength = value;
			}
			
			[Bindable]
			public function get maxItemLength () : int
			{
				if (!listData)
					return 1;
				
				var maxLength : Number = 1;
				
				for each (var itemData:String in listData)
				{
					if (itemData.length > maxLength)
						maxLength = itemData.length;
				}
				
				return maxLength;
			}
			
			public function dispose() : void
			{
				PopUpManager.removePopUp( this );
			}
			
			
		]]>
	</mx:Script>
	
	<mx:List id="list"
			 height="100%"
			 width="{maxItemLength * 8}"
			 dataProvider="{listData}"
			 selectedIndex="0"
			 labelField="label"/>
		
</mx:Panel>
