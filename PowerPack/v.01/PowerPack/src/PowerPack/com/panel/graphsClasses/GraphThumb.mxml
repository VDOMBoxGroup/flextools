<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml" 
	horizontalAlign="center" 
	verticalAlign="middle" 
	borderStyle="none" 
	width="40"
	backgroundAlpha="0.0">
	
    <mx:Script>
        <![CDATA[
        	import mx.core.UITextField;
        	import mx.core.IUITextField;           
            // Define a property for returning the new value to the item.
            [Bindable]
            public var returnText:String;
            
            public var labelTextField:IUITextField;
            
			override protected function createChildren():void
			{
       			super.createChildren();
       			
       			if (!labelTextField)
			    {
			    	setStyle("fontFamily", "Arial");
			    	setStyle("fontSize", "11");
			    	setStyle("fontWeight", "normal");
			        labelTextField = IUITextField(createInFontContext(UITextField));
			        labelTextField.text = txtThumb.text;
			        //labelTextField.styleName = getStyle("labelTextStyleName");
			        labelTextField.enabled = true;
			        
			        cnvs.addChildAt(DisplayObject(labelTextField), 0);
		    	}
   			}    
   			
		    /**
		     *  @private
		     */
			override protected function updateDisplayList(unscaledWidth:Number,
														  unscaledHeight:Number):void
			{
				super.updateDisplayList(unscaledWidth, unscaledHeight);
				
				var lblWidth:int = cnvs.width - cnvs.getStyle('paddingLeft') - cnvs.getStyle('paddingRight') - 10;
				labelTextField.text = txtThumb.text;
				labelTextField.width = lblWidth;
				
				if(labelTextField.textWidth>lblWidth) {
					labelTextField.truncateToFit("...");
				}

				cnvs.validateNow();
			}   			        
        ]]>
    </mx:Script>
    
	<mx:Image id="imgThumb" scaleContent="true" autoLoad="true" source="@Embed('../../../../../resources/tree.png')" width="24" height="24"/>
	
	<mx:Canvas id="cnvs" width="99%">
		<mx:TextInput id="txtThumb" fontFamily="Arial" fontSize="11" fontWeight="normal"
			text="{data.name}" textAlign="center" width="100%" visible="false" horizontalCenter="0" 
			change="returnText=txtThumb.text;"
			updateComplete="returnText=txtThumb.text;" />
	</mx:Canvas>
	
</mx:VBox>
